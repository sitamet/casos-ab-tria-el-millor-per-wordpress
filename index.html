<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/wetopi.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section id="start">
            <h2>Casos A/B<br>
                Tria el millor per a WordPress</h2>
        </section>

        <section id="jv" data-background-color="#e9e9e9">
            <div style="display: flex; padding:0 100px;">
                <div style="flex: 1;">
                    <img src="assets/oric-1-then-sony-msx.webp" style="max-width: 420px;">
                </div>
                <div style="flex: 1; text-align: left; margin: 3em 0 0 1em;">
                    <h1 class="r-fit-text">Joan Vega</h1>
                    <ul>
                        <li>Full stack developer</li>
                        <li>2008 els primers WP</li>
                        <li>2015 hosting WP</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="intro">
            <section id="temes">
                <h2>Temes a tractar</h2>
                <ul>
                    <li>Seguretat</li>
                    <li>Rendiment <span style="font-weight:200; font-size:0.7em">(Velocitat)</span></li>
                </ul>
            </section>

            <section id="qr">
                <h3>Ajudeu-me a triar:</h3>
                <a href="https://wetopi.com/qr" target="_blank"><img src="assets/qr-code.png" class="responsive-image"
                                                                     style="max-height: 400px; margin:0;"></a>
                <p style="margin-bottom: 70px;"><small><a href="https://wetopi.com/qr"
                                                          target="_blank">wetopi.com/qr</a></small></p>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=intro"></iframe>
            </section>

        </section>

        <!-- Seguretat -->

        <section id="#trafic">
            <h2>Seguretat: tràfic no desitjat</h2>
            <p class="fragment">2023: casi el 50% bots, 30% maliciosos.<br>
                <small>
                    <a href="https://blog.barracuda.com/2023/10/18/threat-spotlight-bad-bot-traffic-changing">Barracuda</a>,
                    <a href="https://www.statista.com/statistics/1264226/human-and-bot-web-traffic-share/">Statista</a>,
                    <a href="https://increditools.com/what-percentage-of-internet-traffic-is-bots/">Increditools</a>,
                    <a href="https://www.imperva.com/resources/resource-library/reports/2023-imperva-bad-bot-report/">Imperva</a></small>
            </p>
        </section>

        <section id="trafic-no-desitjat">

            <section class="disable-layout">
                <h2>Seguretat: tràfic no desitjat</h2>
                <img class="a" src="assets/seguretat-trafic-no-legitim.png">
                <img class="b" src="assets/seguretat-trafic-legitim.png">
            </section>

            <section id="trafic-ab">
                <section class="disable-layout">
                    <img class="a" src="assets/seguretat-trafic-no-legitim-zoom.png">
                    <img class="b" src="assets/seguretat-trafic-legitim-zoom.png">
                    <iframe class="lazy-iframe"
                            data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=trafic"></iframe>
                    <h3>Amb quin tràfic us quedaríeu?</h3>
                </section>
            </section>

        </section>


        <section id="necessitem-proteccio">

            <section>
                <h2>Necessitem protecció</h2>
                <p>... enfront el tràfic no desitjat</p>
            </section>

            <section class="disable-layout">
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=necessitemproteccio"></iframe>
                <div>
                    <img class="a" src="assets/seguretat-wp-insegur.png">
                    <img class="b" src="assets/seguretat-wp-segur.png"></div>
                <h2>quina és més segura?</h2>
            </section>

            <section>
                <h2>Necessitem protecció</h2>
                <ol sytle="clear: both;">
                    <li>Actualitzacions</li>
                    <li>Contrasenyes fortes</li>
                    <li>Tallafocs extern WAF</li>
                    <li>Bloqueig escriptura</li>
                </ol>
            </section>

            <section>
                <h2>Necessitem protecció</h2>
                <h3>... si tenim poc tràfic,<br>ok a:</h3>
                <ul>
                    <li>Extensions tallafocs,</li>
                    <li>limitadors de intents login</li>
                </ul>
            </section>


        </section>


        <!-- Rendiment -->
        <section>

            <section id="velocitat">
                <h1>Rendiment <span style="font-weight:200; font-size:0.8em">(Velocitat)</span></h1>
                <p>Volem que la web vagi ràpid</p>
            </section>

            <section id="velocitat-etapes">
                <h2>Etapes <span style="font-weight:200; font-size:0.8em">(Velocitat)</span></h2>

                <ol class="alpha">
                    <li>Servir la pàgina<br>
                        <small>dns, processar, latència xarxa, ...</small>
                    </li>

                    <li>Pintar pàgina<br>
                        <small>carregar recursos, aplicar estils, javascript, ...</small>
                    </li>
                </ol>
            </section>
        </section>

        <section id="velocitat-al-back">

            <section id="velocitat-al-back-mesurar" class="disable-layout">
                <h4>Mesurar Velocitat al "Servir la pàgina"</h4>
                <img class="ab" src="assets/ttfb-mesurar-velocitat.webp" style="max-width: 700px; margin-top:-10px;">
                <div class="a">
                    <h4>(A) Amb les Developer tools</h4>
                </div>
                <div class="b">
                    <h4>(B) No controlo les Dev tools</h4>
                </div>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=whatisttfb"></iframe>
            </section>


            <section id="velocitat-al-back-ab-ttfb" class="disable-layout">
                <img class="ab" src="assets/ttfb-comparativa.webp" style="max-width: 1100px; margin-top:-160px">
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=ttfb"></iframe>
            </section>

            <section id="velocitat-al-back-ab-extensions" class="disable-layout">
                <h4>Quina es més lleugera?</h4>
                <img class="a" src="assets/rendiment-wp-plugins-intenssos-lenta.png">
                <img class="b" src="assets/rendiment-wp-plugins-intenssos-ok.png">
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=pluginsintensos"></iframe>
            </section>

            <section id="velocitat-que-fer-ara">
                <h2>Que puc fer: Ara! Ja!!!</h2>
                <ul>
                    <li>Extensions: les mínimes<br>
                        <small>o evita les que afectin pintat o escriguin a bbdd.</small>
                    </li>
                    <li>Tallafocs: fora de WP</li>
                    <li>Redireccions: fora de WP</li>
                    <li>Base de dades: motor Innodb</li>
                </ul>
            </section>

            <section id="velocitat-al-back-ab-memoria" class="disable-layout">
                <h3>Si incremento la memòria de WordPress, anirà més ràpid?</h3>
                <pre style="margin-bottom: 100px;"><code>
                // ... wp-config.php
                define('WP_MEMORY_LIMIT', '512M');
                ...
                </code></pre>
                <div class="a">
                    <h4>(A) Si<br><small>en alguns casos</small></h4>
                </div>
                <div class="b">
                    <h4>(B) No</h4>
                </div>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=mes_memoria"></iframe>
            </section>

            <section id="velocitat-al-back-ab-cores" class="disable-layout">
                <h2 style="margin:2em 0">I si escalo i assigno més Cores?</h2>
                <div class="a">
                    <h4>(A) Anirà mes ràpid.</h4>
                </div>
                <div class="b">
                    <h4>(B) Probablement no.</h4>
                </div>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=mes_cores"></iframe>
            </section>

            <section id="velocitat-una-bona-base">
                <h2>Procurar sempre una bona base</h2>
                <ul style="margin-top: 1em">
                    <li>Un bon Hosting: TTFB<200 + HTTP/3 + Compressors</li>
                    <li>Evita temes multiproposit i<br>constructors pesats<br><small
                            class="fragment">Ideal: "Temes de Blocks"</small></li>
                </ul>
            </section>

            <section id="velocitat-al-back-ab-cdn">
                <h3>Tenim usuaris a Europa ...</h3>
                <img src="assets/cdn.png" style="max-width: 1300px;">
            </section>

            <section id="velocitat-al-back-ab-cdn-ttfb" class="disable-layout">
                <h3>Tenim usuaris a Europa ...</h3>
                <a href="https://app.speedvitals.com/ttfb-test" target="_blank"><img src="assets/cdn-necessari-si-no.webp" style="max-width: 800px; margin-top:-10px;"></a>
                <div class="a">
                    <h4>(A) CDN necessari</h4>
                </div>
                <div class="b">
                    <h4>(B) CDN no necessari</h4>
                </div>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=cdn"></iframe>
            </section>

            <section id="velocitat-algun altre remei">
                <h2>... algun altre remei ?</h2>
                <ul>
                    <li>Cache</li>
                    <li>Impossible millorar Hosting: <span style="font-weight: 200; font-size: 0.9em">afegir CDN</span></li>
                    <li>Inspeciona a fons: <span style="font-weight: 200; font-size: 0.9em">Query Monitor,  wp profile</span></li>
                </ul>
            </section>
        </section>

        <section id="velocitat-al-front">

            <section id="velocitat-al-front">
                <h1>Rendiment</h1>
                <p>Etapa: Pintar la página</p>
            </section>

            <section id="core-web-vitals" class="disable-layout">
                <h2>Core Web Vitals</h2>
                <div>
                    <img src="assets/cwv-largest-contentful-paint.svg" style="max-width: 30%">
                    <img src="assets/cwv-inp-thresholds.svg" style="max-width: 30%">
                    <img src="assets/cwv-cumulative-layout-shift.svg" style="max-width: 30%">
                </div>
                <div class="a">
                    <h3>(A) Si<br><small>les he incorporat a la dieta</small></h3>
                </div>
                <div class="b">
                    <h3>(B) No<br><small>no se per on començar</small></h3>
                </div>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=cwv"></iframe>
            </section>


            <section id="que-afecta-al-front-resumit">
                <h2>Bases per pintar la pàgina ràpid:</h2>
                <ul>
                    <li>Un bon hosting</li>
                    <li>Un tema lleuger</li>
                    <li>Poques extensions</li>
                    <li>Imatge i vídeo lleugers i diferits</li>
                </ul>
            </section>


            <section id="que-afecta-al-front">
                <h2>...algun detall més concret?</h2>
                <ul>
                    <li>Optimitza les imatges: webp, svg<br>
                        <small>sobretot element principal (LCP)</small>
                    </li>
                    <li>Atribut <code style="font-size:.8em">fetchpriority="high"</code><br>
                        <small>per l'element principal (LCP)</small>
                    </li>
                    <li>Imatges amb les seves mides<br>
                        <small>per evitar salts (CLS)</small>
                    </li>
                    <li>Javascript: el mínim<br>
                        <small>i diferit: <code>&lt;script defer</code>...  (INP)</small></li>
                    <li>Lazy loading per imatges i vídeos</li>

                </ul>
            </section>

        </section>


        <section id="fi">
            <h1>moltes gràcies :)</h1>
            <ul>
                <li>Presentació<br>
                    <small>github: <a
                            href="https://github.com/sitamet/casos-ab-tria-el-millor-per-wordpress">sitamet/casos-ab-tria-el-millor-per-wordpress</a>/</small>
                </li>
                <li>Vota A/B: un experiment<br>
                    <small>github: <a href="https://github.com/sitamet/vote-ab">sitamet/vote-ab</a> i <a
                            href="https://github.com/sitamet/vote-ab-server">sitamet/vote-ab-server</a></small></li>
                <li>Gràcies reveal.js<br>
                    <small>github: <a href="https://github.com/hakimel/reveal.js">hakimel/reveal.js</a></small></li>

            </ul>
        </section>


        <!-- No funciona -->
        <section>
            <h1>Quan passen coses...</h1>
        </section>

        <section id="no-funciona">

            <section>
                <img src="assets/no-no-hemos-hecho-nada.webp">
            </section>

            <section>
                <h2>Qualsevol petit canvi<br>
                    pot fer caure la web.</h2>
                <p>En aquest cas un canvi de config.</p>
                <p>Però fins i tot sense fer res per part nostre,<br>
                    WordPress i el seu contingut canvia.</p>
            </section>

            <section>
                <h2>No funciona: ranking causes</h2>
                <ol>
                    <li>Actualització (automàtica) provoca conflicte.</li>
                    <li>Base de dades <br><small>(timeouts, errors)</small></li>
                    <li>Certificat https no renovat.</li>
                    <li>Esgotat algun límit de recursos.</li>
                    <li>Dependència externa falla.</li>
                </ol>
            </section>

            <section>
                <h2>No funciona</h2>
                <img src="assets/no-funciona-error.png">
            </section>

            <section class="disable-layout">
                <h2>No funciona: que faig?</h2>
                <img class="a" src="assets/no-funciona-a-obro-chat.png"
                     style="width: 30%; box-shadow: none;">
                <img class="b" src="assets/no-funciona-a-obro-logs.png" style="width: 60%">
                <p>&nbsp;</p>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=nofunciona"></iframe>

            </section>

            <section id="no-funciona-health-check-and-troubleshooting">
                <img src="assets/no-funciona-health-check-and-troubleshooting.png">
            </section>


        </section>

        <section id="el-disc-creix">
            <section>
                <h2>No se que passa!</h2>
                <p>L'espai ocupat en disc creix<br>
                    sense que jo faci res!!</p>
            </section>

            <section class="disable-layout">
                <h2>Sense fer res?</h2>
                <p>&nbsp;</p>
                <div class="a">
                    <h3>(A) Estrany</h3>
                </div>
                <div class="b">
                    <h3>(B) Normal</h3>
                </div>
                <iframe class="lazy-iframe"
                        data-src="https://vote-ab-cb2e2bb504c7.herokuapp.com/results?page=creixdisc"></iframe>
            </section>


            <section id="el-disc-creix">
                <h2>L'espai en disc creix ... per:</h2>
                <ul>
                    <li>caché.</li>
                    <li>sessions (carrets compra, registres, spam, bots, ...)</li>
                    <li>backups locals.</li>
                    <li>base de dades.</li>
                    <li>extensió escriu a base de dades.</li>
                </ul>
            </section>
        </section>

    </div>
</div>
<script src="dist/reveal.js"></script>
<script src="plugin/zoom/zoom.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        margin: 0,
        hash: true,
        progress: false,
        width: 1150,

        // Vertical centering of slides
        center: true,
        disableLayout: false,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealHighlight, RevealZoom]
    });


    Reveal.addEventListener('slidechanged', function (event) {
        // Encuentra todos los iframes dentro de la diapositiva actual
        let iframes = event.currentSlide.querySelectorAll('.lazy-iframe');
        Array.prototype.forEach.call(iframes, function (iframe) {
            // Verifica si el iframe ya tiene un 'src' para no cargarlo de nuevo
            if (!iframe.src) {
                // Establece el 'src' del iframe a partir del 'data-src'
                iframe.src = iframe.getAttribute('data-src');
            }
        });
    });


</script>
</body>
</html>
